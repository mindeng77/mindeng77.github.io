<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="refresh token으로 access token발급" /><meta property="og:locale" content="ko" /><meta name="description" content="axios로 요청시 401에러가 발생하면 가지고 있던 refresh token으로 요청 토큰 재발급 후 이전 요청 다시 요청 토큰 재발급 중복 요청 방지" /><meta property="og:description" content="axios로 요청시 401에러가 발생하면 가지고 있던 refresh token으로 요청 토큰 재발급 후 이전 요청 다시 요청 토큰 재발급 중복 요청 방지" /><link rel="canonical" href="https://mindeng77.github.io/posts/refresh-token%EC%9C%BC%EB%A1%9C-access-token%EB%B0%9C%EA%B8%89/" /><meta property="og:url" content="https://mindeng77.github.io/posts/refresh-token%EC%9C%BC%EB%A1%9C-access-token%EB%B0%9C%EA%B8%89/" /><meta property="og:site_name" content="개발오빠" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-01T13:55:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="refresh token으로 access token발급" /><meta name="twitter:site" content="@mindeng77" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-09-01T14:49:37+09:00","datePublished":"2023-09-01T13:55:00+09:00","description":"axios로 요청시 401에러가 발생하면 가지고 있던 refresh token으로 요청 토큰 재발급 후 이전 요청 다시 요청 토큰 재발급 중복 요청 방지","headline":"refresh token으로 access token발급","mainEntityOfPage":{"@type":"WebPage","@id":"https://mindeng77.github.io/posts/refresh-token%EC%9C%BC%EB%A1%9C-access-token%EB%B0%9C%EA%B8%89/"},"url":"https://mindeng77.github.io/posts/refresh-token%EC%9C%BC%EB%A1%9C-access-token%EB%B0%9C%EA%B8%89/"}</script><title>refresh token으로 access token발급 | 개발오빠</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="개발오빠"><meta name="application-name" content="개발오빠"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="dns-prefetch" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin /><link rel="preconnect" href="https://fonts.googleapis.com" /><link rel="dns-prefetch" href="https://fonts.googleapis.com" /><link rel="preconnect" href="https://cdn.jsdelivr.net" /><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" /><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap" /><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials" /><link rel="dns-prefetch" href="https://www.google-analytics.com" /><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous" /><link rel="dns-prefetch" href="https://www.googletagmanager.com" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" /><link rel="stylesheet" href="/assets/css/style.css" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3241593334153141" crossorigin="anonymous" ></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/devobba.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">개발오빠: go</a></div><div class="site-subtitle font-italic">교회오빠말고 개발오빠</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/mindeng77" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['mindeng77','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>refresh token으로 access token발급</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>refresh token으로 access token발급</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/mindeng77">devobba</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1693544100" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-09-01 </em> </span> <span> Updated <em class="timeago" data-ts="1693547377" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2023-09-01 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="608 words"> <em>3 min</em> read</span></div></div></div><div class="post-content"><ul><li>axios로 요청시 401에러가 발생하면 가지고 있던 refresh token으로 요청<li>토큰 재발급 후 이전 요청 다시 요청<li>토큰 재발급 중복 요청 방지</ul><p><strong>axios.js</strong></p><div class="language-javascript highlighter-rouge"><div class="code-header"> <span data-label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="nx">axios</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">axios</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">store</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../stores</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">setLoading</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../stores/loadingSlice</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">setIsLogout</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">../stores/logoutSlice</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">baseURL</span><span class="p">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_API_URL</span><span class="p">,</span>
  <span class="na">timeout</span><span class="p">:</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">let</span> <span class="nx">isRefreshing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">refreshSubscribers</span> <span class="o">=</span> <span class="p">[];</span>

<span class="cm">/**
 * 리프래시 토큰으로 신규 액세스토큰 발급
 * @returns
 */</span>
<span class="kd">const</span> <span class="nx">getAccessTokenByRefreshToken</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">localStorageUser</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">localStorageUser</span> <span class="o">&amp;&amp;</span> <span class="nx">localStorageUser</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">null</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorageUser</span><span class="p">);</span>
      <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span>
        <span class="s2">`</span><span class="p">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">REACT_APP_API_URL</span><span class="p">}</span><span class="s2">/api/master/auth/refresh`</span><span class="p">,</span>
        <span class="kc">null</span><span class="p">,</span>
        <span class="p">{</span>
          <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">Authorization</span><span class="p">:</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">refreshToken</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
          <span class="p">},</span>
        <span class="p">}</span>
      <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">resultCode</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">OK</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="na">accessToken</span><span class="p">:</span> <span class="nx">newAccessToken</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">user</span><span class="p">.</span><span class="nx">accessToken</span> <span class="o">=</span> <span class="nx">newAccessToken</span><span class="p">;</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">user</span><span class="p">));</span>

        <span class="nx">refreshSubscribers</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">callback</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">callback</span><span class="p">(</span><span class="nx">newAccessToken</span><span class="p">);</span>
        <span class="p">});</span>

        <span class="k">return</span> <span class="nx">newAccessToken</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="k">async</span> <span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">isLoading</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">getState</span><span class="p">().</span><span class="nx">loading</span><span class="p">.</span><span class="nx">isLoading</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">setLoading</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="kd">const</span> <span class="nx">localStorageUser</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">localStorageUser</span> <span class="o">&amp;&amp;</span> <span class="nx">localStorageUser</span> <span class="o">!==</span> <span class="dl">"</span><span class="s2">null</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="p">{</span> <span class="nx">usrId</span><span class="p">,</span> <span class="nx">accessToken</span><span class="p">,</span> <span class="nx">tenantId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorageUser</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">usrId</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">usrId</span> <span class="o">=</span> <span class="nx">usrId</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">accessToken</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">Authorization</span> <span class="o">=</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">accessToken</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">tenantId</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">config</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="dl">"</span><span class="s2">x-smp-project-code</span><span class="dl">"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tenantId</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">config</span><span class="p">;</span>
<span class="p">});</span>

<span class="nx">instance</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span>
  <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">response</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="k">async</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">setLoading</span><span class="p">(</span><span class="kc">false</span><span class="p">));</span>

    <span class="c1">// 요청이 이루어졌으며 서버가 2xx의 범위를 벗어나는 상태 코드로 응답했습니다.</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">404</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="dl">"</span><span class="s2">page not found</span><span class="dl">"</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span> <span class="o">===</span> <span class="mi">401</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="p">{</span> <span class="na">config</span><span class="p">:</span> <span class="nx">originRequest</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">isRefreshing</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">refreshSubscribers</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">token</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
              <span class="nx">originRequest</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">Authorization</span> <span class="o">=</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">token</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
              <span class="nx">resolve</span><span class="p">(</span><span class="nx">axios</span><span class="p">(</span><span class="nx">originRequest</span><span class="p">));</span>
            <span class="p">});</span>
          <span class="p">});</span>
        <span class="p">}</span>

        <span class="nx">isRefreshing</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="kd">const</span> <span class="nx">newAccessToken</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getAccessTokenByRefreshToken</span><span class="p">();</span>
        <span class="nx">isRefreshing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">newAccessToken</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">originRequest</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="nx">Authorization</span> <span class="o">=</span> <span class="s2">`Bearer </span><span class="p">${</span><span class="nx">newAccessToken</span><span class="p">}</span><span class="s2">`</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">axios</span><span class="p">(</span><span class="nx">originRequest</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="nx">setIsLogout</span><span class="p">(</span><span class="kc">true</span><span class="p">));</span>
          <span class="k">return</span> <span class="p">{</span>
            <span class="na">resultCode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">OK</span><span class="dl">"</span><span class="p">,</span>
          <span class="p">};</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="c1">// 요청이 이루어 졌으나 응답을 받지 못했습니다.</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">요청이 이루어 졌으나 응답을 받지 못했습니다.</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">오류를 발생시킨 요청을 설정하는 중에 문제가 발생했습니다.</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
      <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">);</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">instance</span><span class="p">;</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/javascript/'>Javascript</a>, <a href='/categories/react-js/'>React.js</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/axios/" class="post-tag no-text-decoration" >axios</a> <a href="/tags/refresh-token/" class="post-tag no-text-decoration" >refresh token</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=refresh+token%EC%9C%BC%EB%A1%9C+access+token%EB%B0%9C%EA%B8%89+-+%EA%B0%9C%EB%B0%9C%EC%98%A4%EB%B9%A0&url=https%3A%2F%2Fmindeng77.github.io%2Fposts%2Frefresh-token%25EC%259C%25BC%25EB%25A1%259C-access-token%25EB%25B0%259C%25EA%25B8%2589%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=refresh+token%EC%9C%BC%EB%A1%9C+access+token%EB%B0%9C%EA%B8%89+-+%EA%B0%9C%EB%B0%9C%EC%98%A4%EB%B9%A0&u=https%3A%2F%2Fmindeng77.github.io%2Fposts%2Frefresh-token%25EC%259C%25BC%25EB%25A1%259C-access-token%25EB%25B0%259C%25EA%25B8%2589%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fmindeng77.github.io%2Fposts%2Frefresh-token%25EC%259C%25BC%25EB%25A1%259C-access-token%25EB%25B0%259C%25EA%25B8%2589%2F&text=refresh+token%EC%9C%BC%EB%A1%9C+access+token%EB%B0%9C%EA%B8%89+-+%EA%B0%9C%EB%B0%9C%EC%98%A4%EB%B9%A0" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/refresh-token%EC%9C%BC%EB%A1%9C-access-token%EB%B0%9C%EA%B8%89/">refresh token으로 access token발급</a><li><a href="/posts/docker%EB%AA%85%EB%A0%B9%EC%96%B4/">docker명령어</a><li><a href="/posts/Throttle-%EC%99%80-Debounce-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC%ED%95%98%EA%B8%B0/">(link) Throttle 와 Debounce 개념 정리하기</a><li><a href="/posts/axios%EC%97%90%EC%84%9C-redux%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/">axios에서 redux사용하기</a><li><a href="/posts/linux-git-server-%EA%B5%AC%EC%B6%95/">linux git server 구축</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/vue-js/">Vue.js</a> <a class="post-tag" href="/tags/react-js/">React.js</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/axios/">axios</a> <a class="post-tag" href="/tags/node-js/">Node.js</a> <a class="post-tag" href="/tags/vue-study/">Vue Study</a> <a class="post-tag" href="/tags/auto-hide-header/">auto hide header</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/axios%EC%97%90%EC%84%9C-redux%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/"><div class="card-body"> <em class="small" data-ts="1682497860" data-df="ll" > Apr 26, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>axios에서 redux사용하기</h3><div class="text-muted small"><p> 조건 서버 요청 중에 로딩바를 보여주고, 응답을 받으면 로딩바를 숨기고 싶다. redux로 로딩중 정보를 등록하여 관리 제약 컴포넌트가 아닌 영역에서 useSelector, useDispatch를 사용할 수 없다. 해결 None Component에서 직접 store정보에 접근하여 사용이 가능함 /src/store/loadi...</p></div></div></a></div><div class="card"> <a href="/posts/%EA%B3%B5%ED%86%B5-Modal-Alert%EC%B0%BD(redux)/"><div class="card-body"> <em class="small" data-ts="1640166720" data-df="ll" > Dec 22, 2021 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>공통 Modal Alert창(redux)</h3><div class="text-muted small"><p> 환경 npm i react-bootstrap bootstrap@5.1.3 npm i redux react-redux action type 정의 /actions/types.js /** * 모달창 띄우기 */ export const SHOW_ALERT_MODAL = &quot;SHOW_ALERT_MODAL&quot;; /** * 모달창 닫기 */...</p></div></div></a></div><div class="card"> <a href="/posts/React.js%EB%A5%BC-%EC%9C%84%ED%95%9C-eslint-%EC%84%A4%EC%A0%95/"><div class="card-body"> <em class="small" data-ts="1673254500" data-df="ll" > Jan 9, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>React.js를 위한 eslint 설정</h3><div class="text-muted small"><p> ESLint 설정 이미 react project가 구성이 되어있다는 전제하에 다음 실행 # 이전 방식 npx eslint --init # 최근 방식 npm init @eslint/config How would you like to use ESLint? eslint를 어떻게 사용할건지(문법체크와 에러확인 용도로만 사용. 코드스타일까지 체크하면...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EC%9E%90%EC%A3%BC-%EC%93%B0%EB%8A%94-git-%EB%AA%85%EB%A0%B9%EC%96%B4/" class="btn btn-outline-primary" prompt="Older"><p>자주 쓰는 git 명령어</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/mindeng77">devobba</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/react-native/">React Native</a> <a class="post-tag" href="/tags/vue-js/">Vue.js</a> <a class="post-tag" href="/tags/react-js/">React.js</a> <a class="post-tag" href="/tags/git/">git</a> <a class="post-tag" href="/tags/spring-boot/">Spring Boot</a> <a class="post-tag" href="/tags/axios/">axios</a> <a class="post-tag" href="/tags/node-js/">Node.js</a> <a class="post-tag" href="/tags/vue-study/">Vue Study</a> <a class="post-tag" href="/tags/auto-hide-header/">auto hide header</a> <a class="post-tag" href="/tags/aws/">aws</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-LGCCX49P13"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-LGCCX49P13'); }); </script>
